<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Math Calculator</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="script.js"></script>
</head>

<body>  
    <style>h1 {
        color: #FFFFFF;
        font-family: system-ui;
    }
    
    body {
        background-color: #222629;
        font-family: Arial, sans-serif;
        padding: 50px;
        margin-left: 10px;
    }
    
    label {
        color: #86C232;
        font-family: system-ui;
        font-size: 20px;
        margin-top: 20px;
    }
    
    button {
        background-color: #86C232;
        border-color: #86C232;
        color: #FFFFFF;
        font-family: system-ui;
        font-size: 20px;
        font-weight: bold;
        margin-left: 30px;
        margin-top: 20px;
        width: 140px;
        cursor: pointer;
    }
    
    button:hover {
        background-color: #4a750d;
        border-color: #4a750d;
        color: #dad4d4;
    }
    
    button:active {
        background-color: #1d3002;
        border-color: transparent;
        color: #dad4d4;
    }
    
    input {
        color: #222629;
        font-family: system-ui;
        font-size: 20px;
        margin-left: 10px;
        margin-top: 20px;
        width: 100px;
        border-radius: 5px;
        border: 1px solid #ddd;
    }
    
    
    .calculator {
        border-radius: 5px;
        width: 200px;
        position: relative;
        left: 30%;
    }
    
    
    #display {
        width: 100%;
        height: 50px;
        border: none;
        outline: none;
        text-align: right;
        padding-right: 500px;
        font-size: 24px;
    }
    
    .buttons {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        
    }
    
    
    .base {
        position: relative;
        left: 30%;
    }</style>

    <div class="calculator">
        <h1>Calculator</h1>
        <input type="text" id="display" readonly>
        <button onclick="clearDisplay()">C</button>
        <div class="buttons">
            <button onclick="appendNumber('9')">9</button>
            <button onclick="appendNumber('8')">8</button>
            <button onclick="appendNumber('7')">7</button>
        </div>
        <div class="buttons">
            <button onclick="appendNumber('6')">6</button>
            <button onclick="appendNumber('5')">5</button>
            <button onclick="appendNumber('4')">4</button>
        </div>
        <div class="buttons">
            <button onclick="appendNumber('3')">3</button>
            <button onclick="appendNumber('2')">2</button>
            <button onclick="appendNumber('1')">1</button>
        </div>
        <div class="buttons">
            <button onclick="appendOperator('+')">+</button>
            <button onclick="appendNumber('0')">0</button>
            <button onclick="appendOperator('-')">-</button>
        </div>
        <div class="buttons">
            <button onclick="appendOperator('*')">*</button>
            <button onclick="appendOperator('/')">/</button>
            <button onclick="appendOperator('^')">^</button>
            <button onclick="calculate()">=</button>
        </div>
    </div>
    
    
    <form>
        <div class="base">
        <label>Base number:</label>
        <input type="text" id="base">
        <label>...to the power of:</label>
        <input type="text" id="exponent">
        <!--set button onClick method to call function we defined passing input values as parameters-->
        <button type="button"
            onclick="callAPI(document.getElementById('base').value,document.getElementById('exponent').value)">CALCULATE</button>
        </div>    
    </form> 

    <script>// callAPI function that takes the base and exponent numbers as parameters
        var callAPI = (base, exponent) => {
            // instantiate a headers object
            var myHeaders = new Headers();
            // add content type header to object
            myHeaders.append("Content-Type", "application/json");
            // using built in JSON utility package turn object to string and store in a variable
            var raw = JSON.stringify({ "base": base, "exponent": exponent });
            // create a JSON object with parameters for API call and store in a variable
            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: raw,
                redirect: 'follow'
            };
            // make API call with parameters and use promises to get response
            fetch("YOUR API GATEWAY ENDPOINT", requestOptions)
                .then(response => response.text())
                .then(result => alert(JSON.parse(result).body))
                .catch(error => console.log('error', error));
        }
        
        let currentInput = '';
        let operator = null;
        let operand = null;
        
        function appendNumber(number) {
            currentInput += number;
            document.getElementById('display').value = currentInput;
        }
        
        function appendOperator(op) {
            if (operator !== null) calculate();
            operator = op;
            operand = parseFloat(currentInput);
            currentInput = '';
        }
        
        function calculate() {
            // temporary: but we move this over to the API
            if (operator !== null) {
                let result;
                switch (operator) {
                    case '+':
                        result = operand + parseFloat(currentInput);
                        break;
                    case '-':
                        result = operand - parseFloat(currentInput);
                        break;
                    case '*':
                        result = operand * parseFloat(currentInput);
                        break;
                    case '/':
                        result = operand / parseFloat(currentInput);
                        break;
                    case '^':
                        result = operand ** parseInt(currentInput);
                        break;
                }
                document.getElementById('display').value = result;
                currentInput = '' + result;
                operator = null;
            }
        
        }
        
        function clearDisplay() {
            currentInput = '';
            operator = null;
            operand = null;
            document.getElementById('display').value = '';
        }
        
        
        function validateForm() {
            var fileInput = document.getElementById('fileToUpload');
            var errorText = document.getElementById('error');
            if (fileInput.files.length === 0) {
                errorText.textContent = 'Error: No file selected.';
                return false;
            }
            errorText.textContent = '';
            return true;
        }</script>
</body>

</html>
